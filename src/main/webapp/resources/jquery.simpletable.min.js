!function(a){
	a.fn.simpletable=function(b){
		var j,k,c=a.extend({},a.fn.simpletable.defaults,b),d=a(this),e="<button type='button' class='btn btn-md btn-success text-center' id='baddtable'><span class='glyphicon glyphicon-plus' aria-hidden='true'></span></button></td>",f=d.find("th"),g=[],h=[],i=[],
		l=function(b){
			d.find("tbody").empty();for(var e="",f=0;f<b.length;f++){var i=b[f];e+="<tr>";for(var k=0;k<g.length;k++)"custom"==h[k]?(e+="<td class='text-center' id='"+g[k]+"''>",e+=c.customRenderView[g[k]](f,i[j],i[g[k]]),e+="</td>"):e+="<td class='text-center' id='"+g[k]+"''>"+i[g[k]]+"</td>";e+="<td class='text-center'><button type='button' class='btn btn-xs btn-warning bedit'>Edit</button></td> ",e+="<td class='text-center'><button type='button' class='btn btn-xs btn-danger bdel'>Delete</button></td>"}console.log(a("table#list_badges")),console.log(d),d.find("tbody").append(e)},
		m=function(b,e){d.find("tbody").empty();for(var f=a(e).parent().parent().find("#"+j),k=f.text(),l="",m=0;m<b.length;m++){var n=b[m];if(l+="<tr>",console.log(n[j]+" "+k),n[j]==k){for(var o=0;o<g.length;o++)if(i[o])if("custom"==h[o])l+="<td class='text-center' id='"+g[o]+"''>",l+=c.customRenderEdit[g[o]](m,n[j],n[g[o]]),l+="</td>";else switch(h[o]){case"text":l+="<td class='text-center' id='"+g[o]+"''><input type=\"text\" class='form-control' value="+n[g[o]]+" readonly></td>";break;case"number":l+="<td class='text-center' id='"+g[o]+"''><input type=\"number\" class='form-control' value="+n[g[o]]+" readonly></td>";break;case"boolean":l+=n[g[o]]?"<td class='text-center' id='"+g[o]+"''><input type=\"checkbox\" class='form-control' checked readonly></td>":"<td class='text-center' id='"+g[o]+"''><input type=\"checkbox\" class='form-control' readonly></td>"}else if("custom"==h[o])l+="<td class='text-center' id='"+g[o]+"''>",l+=c.customRenderEdit[g[o]](m,n[j],n[g[o]]),l+="</td>";else switch(h[o]){case"text":l+="<td class='text-center' id='"+g[o]+"''><input type=\"text\" class='form-control' value="+n[g[o]]+"></td>";break;case"number":l+="<td class='text-center' id='"+g[o]+"''><input type=\"number\" class='form-control' value="+n[g[o]]+"></td>";break;case"boolean":l+=n[g[o]]?"<td class='text-center' id='"+g[o]+"''><input type=\"checkbox\" class='form-control' checked></td>":"<td class='text-center' id='"+g[o]+"''><input type=\"checkbox\" class='form-control' ></td>"}l+="<td class='text-center'><button type='button' class='btn btn-xs btn-success bsave'>Save</button></td> ",l+="<td class='text-center'><button type='button' class='btn btn-xs btn-danger bcancel'>Cancel</button></td>"}else{for(var o=0;o<g.length;o++)"custom"==h[o]?(l+="<td class='text-center' id='"+g[o]+"''>",l+=c.customRenderView[g[o]](m,n[j],n[g[o]]),l+="</td>"):l+="<td class='text-center' id='"+g[o]+"''>"+n[g[o]]+"</td>";l+="<td class='text-center'><button type='button' class='btn btn-xs btn-warning bedit'>Edit</button></td> ",l+="<td class='text-center'><button type='button' class='btn btn-xs btn-danger bdel'>Delete</button></td>"}}d.find("tbody").append(l)},
			n=function(){for(var a="<tr>",b=0;b<g.length;b++)if("custom"==h[b])a+="<td class='text-center' id='"+g[b]+"''>",a+=c.customRenderEdit[g[b]](null,null),a+="</td>";else switch(h[b]){case"text":a+="<td class='text-center' id='"+g[b]+"''><input type=\"text\" class='form-control'></td>";break;case"number":a+="<td class='text-center' id='"+g[b]+"''><input type=\"number\" class='form-control'></td>";break;case"boolean":a+="<td class='text-center' id='"+g[b]+"''><input type=\"checkbox\" class='form-control' ></td>"}a+="<td class='text-center'><button type='button' class='btn btn-xs btn-success badd'>Add</button></td> ",a+="<td class='text-center'><button type='button' class='btn btn-xs btn-danger bcancel'>Cancel</button></td>",d.find("tbody").append(a)},
			o=function(a){if("json"==c.format.toLowerCase()){var b={};console.log(a);for(var d=0;d<g.length;d++)if(!i[d])switch(h[d]){case"custom":var e=c.customSave[g[d]]();e&&(b[g[d]]=e);break;case"boolean":var e=a.find("#"+g[d]+" input").prop("checked");e&&(b[g[d]]=e);break;default:var e=a.find("#"+g[d]+" input").val();e&&(b[g[d]]=e)}return b}if("form"==c.format.toLowerCase()){var f=new FormData;console.log(a);for(var d=0;d<g.length;d++)if(!i[d])switch(h[d]){case"custom":var e=c.customSave[g[d]]();e&&f.append(g[d],e);break;case"boolean":var e=a.find("#"+g[d]+" input").prop("checked");e&&f.append(g[d],e);break;default:var e=a.find("#"+g[d]+" input").val();e&&f.append(g[d],e)}return f}throw'Format is not recognized, try "json" or "form" '},
			p=function(a){if("json"==c.format.toLowerCase()){var b={};console.log(a);for(var d=0;d<g.length;d++)switch(h[d]){case"custom":var e=c.customSave[g[d]]();b[g[d]]=e;break;case"boolean":var e=a.find("#"+g[d]+" input").prop("checked");b[g[d]]=e;break;default:var e=a.find("#"+g[d]+" input").val();b[g[d]]=e}return b}if("form"==c.format.toLowerCase()){var f=new FormData;console.log(a);for(var d=0;d<g.length;d++)switch(h[d]){case"custom":var e=c.customSave[g[d]]();f.append(g[d],e);break;case"boolean":var e=a.find("#"+g[d]+" input").prop("checked");f.append(g[d],e);break;default:var e=a.find("#"+g[d]+" input").val();console.log(g[d]+" "+e),f.append(g[d],e)}return f}throw'Format is not recognized, try "json" or "form" '},
			q=function(){if(a.each(f,function(b,c){g.push(a(c).attr("id")),h.push(a(c).attr("type")),a(c).attr("static")?i.push(!0):i.push(!1),console.log(a(c).attr("prime")),a(c).attr("prime")&&(j=a(c).attr("id"))}),!j)throw"No prime ID set";g=g.slice(0,g.length-2),h=h.slice(0,h.length-2),console.log(h),console.log(i);a(d).after(e),a.get(c.getURL(),function(a){var b=c.dataFormatter(a);k=b,console.log(k),l(b),t()})},
			r=function(){a.get(c.getURL(),function(a){var b=c.dataFormatter(a);k=b,l(b)})},
			s=function(){r()},
			t=function(){d.find("tbody").on("click",".bedit",function(a){m(k,a.target)}),d.find("tbody").on("click",".bsave",function(b){var d=a(b.target).parent().parent(),e=d.find("#"+j),f=e.find("input").val(),g=o(d);a.ajax({url:c.editURL(f),type:"PUT",processData:!1,data:g,contentType:!1,crossDomain:!0,success:function(a,b){console.log(a),r()},error:function(a){console.log(a)}})}),d.find("tbody").on("click",".bdel",function(b){var d=a(b.target).parent().parent(),e=d.find("#"+j),f=e.text();a.ajax({url:c.deleteURL(f),type:"DELETE",processData:!1,contentType:!1,crossDomain:!0,success:function(a,b){console.log(a),s()},error:function(a){console.log(a)}})}),d.find("tbody").on("click",".bcancel",function(b){l(k),a("#baddtable").prop("disabled",!1)}),d.find("tbody").on("click",".badd",function(b){var d=a(b.target).parent().parent(),e=d.find("#"+j),f=e.find("input").val(),g=p(d);a.ajax({url:c.addURL(f),type:"POST",processData:!1,data:g,contentType:!1,crossDomain:!0,success:function(b,c){console.log(b),a("#baddtable").prop("disabled",!1),s()},error:function(a){console.log(a)}})}),a("#baddtable").on("click",function(b){a("#baddtable").prop("disabled")||(n(),a("#baddtable").prop("disabled",!0))})};
			return q(),this},
			a.fn.simpletable.defaults={getURL:function(){},deleteURL:function(){},editURL:function(){},addURL:function(){},customRenderView:{},customRenderEdit:{},dataFormatter:function(){},format:"form"}
			}(jQuery);